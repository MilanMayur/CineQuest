<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Change Password - CineQuest</title>
        <link rel="stylesheet" href="/styles.css">
        <link rel="icon" href="/cinequest.png" type="image/png">
        <div id="css-test" style="display: none;"></div>
        <script>
            if(localStorage.getItem('darkMode') === 'true'){
              document.documentElement.classList.add('dark-mode');
            }
        </script>
    </head>
    <body>
        <div class="container">
            <div class="page-body">

                <!-- Logo & Title -->
                <div class="header">
                <div class="logo">
                    <a href="/movies">
                        <img src="/cinequest.png" alt="cinequest_logo">
                    </a>
                </div>
                <div class="text">
                    <h1>Change Password</h1>
                </div>
                <button id="darkModeToggle" class="dark-mode-button">üåô</button>
                </div>

                <!-- Form -->
                <div class="form-container">
                    <form action="/change-password" method="POST">
                        <div class="form-group">
                            <label for="currentPassword">Current Password:</label>
                            <input type="password" 
                                    id="currentPassword" 
                                    name="currentPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="newPassword">New Password:</label>
                            <input type="password" 
                                    id="newPassword" 
                                    name="newPassword"  
                                    minlength="6" required>
                        </div>
                        <div class="form-group">
                            <label for="confirmNewPassword">Confirm New Password:</label>
                            <input type="password" 
                                    id="confirmNewPassword" 
                                    name="confirmNewPassword"  
                                    minlength="6" required>
                        </div>
                        <button type="submit" class="update-button">Update Password</button>
                    </form>
                </div>

                <!-- Message -->
                <% if(errorMessage){ %>
                    <div class="error-message"><%= errorMessage %></div>
                    <script>
                        window.history.replaceState(null, '', window.location.pathname);
                    </script>
                <% } %>
            </div>
            <button class="back-button" onclick="goBack()">‚Üê Back</button>
        </div>
        <script type="module"> 
            import { toggleDarkMode, autoHideMessages, goBack, 
                    checkAndReloadCSS } from "/functions.js";
            
            toggleDarkMode();
            autoHideMessages();
            checkAndReloadCSS();
            
            window.goBack = goBack;
        </script>
    </body>
</html>
